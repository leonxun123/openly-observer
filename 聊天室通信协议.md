# 聊天室

#### 客户端0:

##### 退出请求：{"login" = 0，"args":"exit"}

#### 服务端0：

##### 退出响应：不响应，直接关闭该用户的套接字



#### 客户端：

##### 登录请求：{“login” = 1,"args":{"user_name":"账号""password":"密码"}}

#### 服务端1：

##### 登录响应：{"login" = 1,"return" = 0   }  #登录成功返回0，用户名不存在返回1，密码错误返回2



#### 客户端2：

##### 注册请求：{"login" = 2,"args":{"nick_name":"用户名""user_name":"账号"，"password":"密码"，“phone”:"手机号"，“email”："邮箱"}}

#### 服务端2：

##### 注册响应：{"login":2，"return" = 0}      #注册成功返回0，用户名已存在返回1，账号已存在返回2，邮箱存在返回3



#### 客户端3：

##### 修改密码请求：{"login" = 3，"args":{"user_name":"账号"，"old_password":"旧密码"，"new_password":“新密码”}

#### 服务端3：

##### 修改密码响应：{"login":3，"return" = 0}    #修改成功返回0，账号不存在返回1，旧密码错误返回2



#### 客户端4：

##### 重置密码请求：{"login" = 4，"args":{"email":"邮箱账号"}}

#### 服务端4：

##### 重置密码响应：{"login"= 4,"return" = 0 }     #重置密码成功返回0，邮箱不存在返回1



## 服务端转发：

每当用户上线时，转发一条消息给所有客户端，某某用户已上线，并且发送一份在线用户名单，供客户端实现后续功能，

每当用户下线时，转发一条消息给所有客户端，某某用户已下线，并且发送一份在线用户名单，供客户端实现后续功能，




## 文件传输协议

### 文件传输协议分为群文件和单人文件传输。



#### 1. 群文件传输：

#### 客户端请求：

###### 上传文件(文件夹){"up_files":"everyone","files_information":{"files_name":"文件名"，"files_size":"文件大小"，"files_md5":"文件md5值"}"}

###### 上传空文件夹：{"up_files":"everyone","dirs_information":{”dirs_name“:"文件夹名"，"dirs_size":"-1" }}

#### 服务端响应：

###### 上传文件响应：{"up_files":everyone,"return": 0, 1}   #校验md5无误即上传成功返回0， #md5校验不通过返回1

###### 上传文件夹则验证其中每一个文件





### 2.单人文件传输

#### 发送方

###### 上传文件（文件夹）：{"up_files":"my_nmae"，"files_information":{"files_name":"文件名"，"files_size":"文件大小"，"files_md5":"文件md5值"}"}

###### 上传空文件夹：{"up_files":"my_name"，”dirs_information":{”dirs_name“:"文件夹名"，"dirs_size":"-1" }“}

#### 服务器

##### 接收文件文件夹：接收文件后单独保存在一个文件夹内，并向接收方发送一个通知，通知有人向他发送了文件(夹)。

#### 接收方

##### 下载文件：接到服务端的通知后，选择接收或者拒绝，拒绝后不可重新下载，接收后则开始下载，并且关闭提示窗口，下载成功后会有提示。

